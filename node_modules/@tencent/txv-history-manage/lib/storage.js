var Storage = {
  get: function (key) {
    if (Storage.support) {
      return localStorage.getItem(key)
    }
    return null;
  },

  set: function (key, value) {
    if (Storage.support) {
      try {
        localStorage.setItem(key, value)
      } catch (e) {
        // window.console && window.console.log && console.log(e)
      }
    }
  },

  setJSON: function(key, value) {
    if (Storage.support) {
      try {
        value = JSON.stringify(value)
        Storage.set(key, value)
      } catch (e) {
        // window.console && window.console.log && console.log(e)
      }
    }
  },

  remove: function (key) {
    if (Storage.support) {
      try {
        localStorage.removeItem(key)
      } catch (e) {
        // window.console && window.console.log && console.log(e)
      }
    }
  },

  support: (function () {
    // 只检测localStorage 和 JSON， IE7不考虑了
    return typeof window.localStorage !== 'undefined' && (!!localStorage.getItem) && typeof JSON !== 'undefined'; 
  })(),

  // 是否为safari无痕模式
  safariPrivateMode: false
}

// safari 无痕模式不支持localStorage.setItem
try {
  if (Storage.support) {
    localStorage.setItem('supportLocalStorageSetItem', 1);
    localStorage.removeItem('supportLocalStorageSetItem');
  }
} catch (e) {
  Storage.safariPrivateMode = true;
}

module.exports = Storage
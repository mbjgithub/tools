'use strict';
/**
 * 腾讯新闻
 *
 * 由于视频的后台和新闻的微信登陆态是不通的，所以只有openLogin需要调用原生接口，其余继承qq的逻辑
 */

var jsbridge = require("../../jsbridge");
var qq = require("./qq.js");

['getLoginData', 'getLoginDataSync', 'gTk', 'getUserInfo'].forEach(function (key) {
	exports[key] = qq[key].bind(exports);
});

window["showNativeLoginWithTypeCallBack"] = function(status, params) {
	if(status == 1) {
		//alert("登录成功:" + params);
		location.href = lastRU;
	}
	if(status == 0) {
		//alert("登录失败:" + params);
	}
};
var lastRU;
exports.openLogin = function (cfg) {
	lastRU = cfg.s_url || location.href;
	jsbridge(function (bridge) {
		bridge.showNativeLoginWithType("qq", "showNativeLoginWithTypeCallBack", "")
	});
};
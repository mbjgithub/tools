'use strict';

module.exports = function (ids, version) {
	var url = '';
	var cid = ids.cover_id || ids.cid;
	var vid = ids.video_id || ids.vid;
	var lid = ids.column_id || ids.lid;

	if (!version) {
		if (cid) {
			url = '//m.v.qq.com/cover/' + cid[0] + '/' + cid + '.html' + (vid ? ('?vid=' + vid) : '');
		} else if (vid) {
			url = "//m.v.qq.com/page/" + vid[0] + "/" + vid[9] + "/" + vid[10] + "/" + vid + ".html";
		} else if (lid) {
			url = "//m.v.qq.com/play.html?columnid=" + lid;
		}
		if (ids.exsource || ids.ex) {
			if (url.match(/\?/)) {
				url += '&exsource=1';
			} else {
				url += '?exsource=1';
			}
		}
	} else if (version == 2) {
		url = [
			"//m.v.qq.com/play.html?",
			cid ? 'cid=' + cid + '&' : null,
			vid ? 'vid=' + vid + '&' : null,
			lid ? 'column_id=' + lid + '&' : null,
			ids.exsource || ids.ex ? 'exsource=1&' : null
		];
		url = url.join('').slice(0, -1);
	}

	return url;
};
'use strict';

var escape = require("./escape");
module.exports = {
	get: function (name, url) {
		var r = new RegExp("(\\?|#|&)" + name + "=([^&#]*)(&|#|$)");
		url = url || location.href;
		var m = url.match(r);
		return (!m ? "" : escape(m[2]));
	},
	/** @description 删除url中的参数信息，防止被分享出去
	 @param {str} str_param 参数信息*/
	del: function (str_param) {
		var r = new RegExp("(\\?|#|&)" + str_param + "=([^&#]*)(&|#|$)");
		var m = location.href.match(r);
		m = m ? m[2] : '';

		try {
			if (window.history && history.replaceState) {
				history.replaceState(null, null, location.href.replace(str_param + "=" + m, ""));
			}
		} catch (e) {
		}
	}
};